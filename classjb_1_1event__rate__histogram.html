<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>JayBeams: jb::event_rate_histogram&lt; duration_type, counter_type, rate_counter_type &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">JayBeams
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">Another project to have fun coding.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacejb.html">jb</a></li><li class="navelem"><a class="el" href="classjb_1_1event__rate__histogram.html">event_rate_histogram</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classjb_1_1event__rate__histogram-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">jb::event_rate_histogram&lt; duration_type, counter_type, rate_counter_type &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Keep a histogram of observed event rates.  
 <a href="classjb_1_1event__rate__histogram.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="event__rate__histogram_8hpp_source.html">event_rate_histogram.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for jb::event_rate_histogram&lt; duration_type, counter_type, rate_counter_type &gt;:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classjb_1_1event__rate__histogram.png" usemap="#jb::event_5Frate_5Fhistogram_3C_20duration_5Ftype_2C_20counter_5Ftype_2C_20rate_5Fcounter_5Ftype_20_3E_map" alt=""/>
  <map id="jb::event_5Frate_5Fhistogram_3C_20duration_5Ftype_2C_20counter_5Ftype_2C_20rate_5Fcounter_5Ftype_20_3E_map" name="jb::event_5Frate_5Fhistogram_3C_20duration_5Ftype_2C_20counter_5Ftype_2C_20rate_5Fcounter_5Ftype_20_3E_map">
<area href="classjb_1_1histogram.html" alt="jb::histogram&lt; integer_range_binning&lt; std::uint64_t &gt;, counter_type &gt;" shape="rect" coords="0,0,445,24"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Type traits.</div></td></tr>
<tr class="memitem:aa2190848e4bb073a12dc71c6a3f70be9"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="classjb_1_1integer__range__binning.html">integer_range_binning</a>&lt; std::uint64_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjb_1_1event__rate__histogram.html#aa2190848e4bb073a12dc71c6a3f70be9">binning_strategy</a></td></tr>
<tr class="separator:aa2190848e4bb073a12dc71c6a3f70be9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc9904205d72f7fa21a0dae8ccf13a7d"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="classjb_1_1histogram.html">histogram</a>&lt; <a class="el" href="classjb_1_1event__rate__histogram.html#aa2190848e4bb073a12dc71c6a3f70be9">binning_strategy</a>, <a class="el" href="classjb_1_1histogram.html#a90639505faf40ecd0f1a5fb526906c2b">counter_type</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjb_1_1event__rate__histogram.html#abc9904205d72f7fa21a0dae8ccf13a7d">rate_histogram</a></td></tr>
<tr class="separator:abc9904205d72f7fa21a0dae8ccf13a7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aedc6a5e584843a4685bfed4177bcb9af"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjb_1_1event__rate__histogram.html#aedc6a5e584843a4685bfed4177bcb9af">event_rate_histogram</a> (std::uint64_t max_expected_rate, duration_type measurement_period, duration_type sampling_period=duration_type(1))</td></tr>
<tr class="memdesc:aedc6a5e584843a4685bfed4177bcb9af"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#aedc6a5e584843a4685bfed4177bcb9af">More...</a><br /></td></tr>
<tr class="separator:aedc6a5e584843a4685bfed4177bcb9af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc4894041b9926c540b8ede21fcfa93e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjb_1_1event__rate__histogram.html#adc4894041b9926c540b8ede21fcfa93e">sample</a> (duration_type ts)</td></tr>
<tr class="memdesc:adc4894041b9926c540b8ede21fcfa93e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Record a new sample.  <a href="#adc4894041b9926c540b8ede21fcfa93e">More...</a><br /></td></tr>
<tr class="separator:adc4894041b9926c540b8ede21fcfa93e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4410a139067e848dbcc91a5d71d64d17"><td class="memItemLeft" align="right" valign="top">std::uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjb_1_1event__rate__histogram.html#a4410a139067e848dbcc91a5d71d64d17">last_rate</a> () const</td></tr>
<tr class="memdesc:a4410a139067e848dbcc91a5d71d64d17"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the last sample, if any.  <a href="#a4410a139067e848dbcc91a5d71d64d17">More...</a><br /></td></tr>
<tr class="separator:a4410a139067e848dbcc91a5d71d64d17"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ad2b7e41ceef0b7fb81a15942083fcfd6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classjb_1_1event__rate__estimator.html">event_rate_estimator</a>&lt; duration_type, rate_counter_type &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjb_1_1event__rate__histogram.html#ad2b7e41ceef0b7fb81a15942083fcfd6">rate_</a></td></tr>
<tr class="separator:ad2b7e41ceef0b7fb81a15942083fcfd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2fff9943ac5959eb75bb1f935c026d9"><td class="memItemLeft" align="right" valign="top">std::uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjb_1_1event__rate__histogram.html#ab2fff9943ac5959eb75bb1f935c026d9">last_rate_</a></td></tr>
<tr class="separator:ab2fff9943ac5959eb75bb1f935c026d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_types_classjb_1_1histogram"><td colspan="2" onclick="javascript:toggleInherit('pub_types_classjb_1_1histogram')"><img src="closed.png" alt="-"/>&#160;Private Types inherited from <a class="el" href="classjb_1_1histogram.html">jb::histogram&lt; integer_range_binning&lt; std::uint64_t &gt;, counter_type &gt;</a></td></tr>
<tr class="memitem:af4ad87cdc2a5e3067bb5416ac616d443 inherit pub_types_classjb_1_1histogram"><td class="memItemLeft" align="right" valign="top">typedef std::vector&lt; <a class="el" href="classjb_1_1histogram.html#a90639505faf40ecd0f1a5fb526906c2b">counter_type</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjb_1_1histogram.html#af4ad87cdc2a5e3067bb5416ac616d443">counters</a></td></tr>
<tr class="memdesc:af4ad87cdc2a5e3067bb5416ac616d443 inherit pub_types_classjb_1_1histogram"><td class="mdescLeft">&#160;</td><td class="mdescRight">The type used to store the bins.  <a href="classjb_1_1histogram.html#af4ad87cdc2a5e3067bb5416ac616d443">More...</a><br /></td></tr>
<tr class="separator:af4ad87cdc2a5e3067bb5416ac616d443 inherit pub_types_classjb_1_1histogram"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aace3e6c50f3a9381209cece0e28693d8 inherit pub_types_classjb_1_1histogram"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="classjb_1_1integer__range__binning.html">integer_range_binning</a>&lt; std::uint64_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjb_1_1histogram.html#aace3e6c50f3a9381209cece0e28693d8">binning_strategy</a></td></tr>
<tr class="separator:aace3e6c50f3a9381209cece0e28693d8 inherit pub_types_classjb_1_1histogram"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd9439f3aa2afdcfa81c70a8601d69e5 inherit pub_types_classjb_1_1histogram"><td class="memItemLeft" align="right" valign="top">typedef binning_strategy::sample_type&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjb_1_1histogram.html#acd9439f3aa2afdcfa81c70a8601d69e5">sample_type</a></td></tr>
<tr class="separator:acd9439f3aa2afdcfa81c70a8601d69e5 inherit pub_types_classjb_1_1histogram"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90639505faf40ecd0f1a5fb526906c2b inherit pub_types_classjb_1_1histogram"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="classjb_1_1histogram.html#a90639505faf40ecd0f1a5fb526906c2b">counter_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjb_1_1histogram.html#a90639505faf40ecd0f1a5fb526906c2b">counter_type</a></td></tr>
<tr class="separator:a90639505faf40ecd0f1a5fb526906c2b inherit pub_types_classjb_1_1histogram"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classjb_1_1histogram"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classjb_1_1histogram')"><img src="closed.png" alt="-"/>&#160;Private Member Functions inherited from <a class="el" href="classjb_1_1histogram.html">jb::histogram&lt; integer_range_binning&lt; std::uint64_t &gt;, counter_type &gt;</a></td></tr>
<tr class="memitem:abdf6ee3911e990a233b6ff837f5927f8 inherit pub_methods_classjb_1_1histogram"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjb_1_1histogram.html#abdf6ee3911e990a233b6ff837f5927f8">histogram</a> (<a class="el" href="classjb_1_1histogram.html#aace3e6c50f3a9381209cece0e28693d8">binning_strategy</a> const &amp;mapping=<a class="el" href="classjb_1_1histogram.html#aace3e6c50f3a9381209cece0e28693d8">binning_strategy</a>())</td></tr>
<tr class="memdesc:abdf6ee3911e990a233b6ff837f5927f8 inherit pub_methods_classjb_1_1histogram"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a histogram given a mapping strategy.  <a href="classjb_1_1histogram.html#abdf6ee3911e990a233b6ff837f5927f8">More...</a><br /></td></tr>
<tr class="separator:abdf6ee3911e990a233b6ff837f5927f8 inherit pub_methods_classjb_1_1histogram"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c36290f97c2a927efc24994b301bda0 inherit pub_methods_classjb_1_1histogram"><td class="memItemLeft" align="right" valign="top">std::uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjb_1_1histogram.html#a9c36290f97c2a927efc24994b301bda0">nsamples</a> () const</td></tr>
<tr class="memdesc:a9c36290f97c2a927efc24994b301bda0 inherit pub_methods_classjb_1_1histogram"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the number of samples observed to this point.  <a href="classjb_1_1histogram.html#a9c36290f97c2a927efc24994b301bda0">More...</a><br /></td></tr>
<tr class="separator:a9c36290f97c2a927efc24994b301bda0 inherit pub_methods_classjb_1_1histogram"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd85c774018220222023e294ad718a74 inherit pub_methods_classjb_1_1histogram"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classjb_1_1histogram.html#acd9439f3aa2afdcfa81c70a8601d69e5">sample_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjb_1_1histogram.html#abd85c774018220222023e294ad718a74">observed_min</a> () const</td></tr>
<tr class="memdesc:abd85c774018220222023e294ad718a74 inherit pub_methods_classjb_1_1histogram"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the smallest sample value observed to this point.  <a href="classjb_1_1histogram.html#abd85c774018220222023e294ad718a74">More...</a><br /></td></tr>
<tr class="separator:abd85c774018220222023e294ad718a74 inherit pub_methods_classjb_1_1histogram"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66bf3ea1b9b4974bf7171bd14279c9dc inherit pub_methods_classjb_1_1histogram"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classjb_1_1histogram.html#acd9439f3aa2afdcfa81c70a8601d69e5">sample_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjb_1_1histogram.html#a66bf3ea1b9b4974bf7171bd14279c9dc">observed_max</a> () const</td></tr>
<tr class="memdesc:a66bf3ea1b9b4974bf7171bd14279c9dc inherit pub_methods_classjb_1_1histogram"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the largest sample value observed to this point.  <a href="classjb_1_1histogram.html#a66bf3ea1b9b4974bf7171bd14279c9dc">More...</a><br /></td></tr>
<tr class="separator:a66bf3ea1b9b4974bf7171bd14279c9dc inherit pub_methods_classjb_1_1histogram"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9581d344c885d2091534603c3fcb6f3d inherit pub_methods_classjb_1_1histogram"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classjb_1_1histogram.html#acd9439f3aa2afdcfa81c70a8601d69e5">sample_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjb_1_1histogram.html#a9581d344c885d2091534603c3fcb6f3d">estimated_mean</a> () const</td></tr>
<tr class="memdesc:a9581d344c885d2091534603c3fcb6f3d inherit pub_methods_classjb_1_1histogram"><td class="mdescLeft">&#160;</td><td class="mdescRight">Estimate the mean of the sample distribution.  <a href="classjb_1_1histogram.html#a9581d344c885d2091534603c3fcb6f3d">More...</a><br /></td></tr>
<tr class="separator:a9581d344c885d2091534603c3fcb6f3d inherit pub_methods_classjb_1_1histogram"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3872ccf648c4957bc76af723d59550cd inherit pub_methods_classjb_1_1histogram"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classjb_1_1histogram.html#acd9439f3aa2afdcfa81c70a8601d69e5">sample_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjb_1_1histogram.html#a3872ccf648c4957bc76af723d59550cd">estimated_quantile</a> (double q) const</td></tr>
<tr class="memdesc:a3872ccf648c4957bc76af723d59550cd inherit pub_methods_classjb_1_1histogram"><td class="mdescLeft">&#160;</td><td class="mdescRight">Estimate a quantile of the sample distribution.  <a href="classjb_1_1histogram.html#a3872ccf648c4957bc76af723d59550cd">More...</a><br /></td></tr>
<tr class="separator:a3872ccf648c4957bc76af723d59550cd inherit pub_methods_classjb_1_1histogram"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba66f6dd97716ee3534f030dbd6d59e4 inherit pub_methods_classjb_1_1histogram"><td class="memItemLeft" align="right" valign="top">std::uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjb_1_1histogram.html#aba66f6dd97716ee3534f030dbd6d59e4">underflow_count</a> () const</td></tr>
<tr class="memdesc:aba66f6dd97716ee3534f030dbd6d59e4 inherit pub_methods_classjb_1_1histogram"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the number of samples smaller than the histogram range.  <a href="classjb_1_1histogram.html#aba66f6dd97716ee3534f030dbd6d59e4">More...</a><br /></td></tr>
<tr class="separator:aba66f6dd97716ee3534f030dbd6d59e4 inherit pub_methods_classjb_1_1histogram"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aded4f15664dc6f54199ec5509d344894 inherit pub_methods_classjb_1_1histogram"><td class="memItemLeft" align="right" valign="top">std::uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjb_1_1histogram.html#aded4f15664dc6f54199ec5509d344894">overflow_count</a> () const</td></tr>
<tr class="memdesc:aded4f15664dc6f54199ec5509d344894 inherit pub_methods_classjb_1_1histogram"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the number of samples larger than the histogram range.  <a href="classjb_1_1histogram.html#aded4f15664dc6f54199ec5509d344894">More...</a><br /></td></tr>
<tr class="separator:aded4f15664dc6f54199ec5509d344894 inherit pub_methods_classjb_1_1histogram"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a858ad913e2643c2989f9002b7a613a15 inherit pub_methods_classjb_1_1histogram"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacejb.html#structjb_1_1histogram__summary">histogram_summary</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjb_1_1histogram.html#a858ad913e2643c2989f9002b7a613a15">summary</a> () const</td></tr>
<tr class="memdesc:a858ad913e2643c2989f9002b7a613a15 inherit pub_methods_classjb_1_1histogram"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a simple summary.  <a href="classjb_1_1histogram.html#a858ad913e2643c2989f9002b7a613a15">More...</a><br /></td></tr>
<tr class="separator:a858ad913e2643c2989f9002b7a613a15 inherit pub_methods_classjb_1_1histogram"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b51fb79ccb2995a8e6d063c982ee8a1 inherit pub_methods_classjb_1_1histogram"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjb_1_1histogram.html#a9b51fb79ccb2995a8e6d063c982ee8a1">sample</a> (<a class="el" href="classjb_1_1histogram.html#acd9439f3aa2afdcfa81c70a8601d69e5">sample_type</a> const &amp;t)</td></tr>
<tr class="memdesc:a9b51fb79ccb2995a8e6d063c982ee8a1 inherit pub_methods_classjb_1_1histogram"><td class="mdescLeft">&#160;</td><td class="mdescRight">Record a new sample.  <a href="classjb_1_1histogram.html#a9b51fb79ccb2995a8e6d063c982ee8a1">More...</a><br /></td></tr>
<tr class="separator:a9b51fb79ccb2995a8e6d063c982ee8a1 inherit pub_methods_classjb_1_1histogram"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abaeeedbe99d6a1f649bd2b3e0774f596 inherit pub_methods_classjb_1_1histogram"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjb_1_1histogram.html#abaeeedbe99d6a1f649bd2b3e0774f596">weighted_sample</a> (<a class="el" href="classjb_1_1histogram.html#acd9439f3aa2afdcfa81c70a8601d69e5">sample_type</a> const &amp;t, <a class="el" href="classjb_1_1histogram.html#a90639505faf40ecd0f1a5fb526906c2b">counter_type</a> weight)</td></tr>
<tr class="memdesc:abaeeedbe99d6a1f649bd2b3e0774f596 inherit pub_methods_classjb_1_1histogram"><td class="mdescLeft">&#160;</td><td class="mdescRight">Record a new sample.  <a href="classjb_1_1histogram.html#abaeeedbe99d6a1f649bd2b3e0774f596">More...</a><br /></td></tr>
<tr class="separator:abaeeedbe99d6a1f649bd2b3e0774f596 inherit pub_methods_classjb_1_1histogram"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd04d5c38e88b4c4cef2784e568f3571 inherit pub_methods_classjb_1_1histogram"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjb_1_1histogram.html#abd04d5c38e88b4c4cef2784e568f3571">reset</a> ()</td></tr>
<tr class="memdesc:abd04d5c38e88b4c4cef2784e568f3571 inherit pub_methods_classjb_1_1histogram"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset all counters.  <a href="classjb_1_1histogram.html#abd04d5c38e88b4c4cef2784e568f3571">More...</a><br /></td></tr>
<tr class="separator:abd04d5c38e88b4c4cef2784e568f3571 inherit pub_methods_classjb_1_1histogram"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename duration_type = std::chrono::microseconds, typename counter_type = int, typename rate_counter_type = int&gt;<br />
class jb::event_rate_histogram&lt; duration_type, counter_type, rate_counter_type &gt;</h3>

<p>Keep a histogram of observed event rates. </p>
<p>This class collects running statistics about event rates. While an <a class="el" href="classjb_1_1event__rate__estimator.html" title="Estimate event rates over a trailing measurement period. ">event_rate_estimator</a> computes the number of events in the last X seconds, this class keeps a tally of the observed event rates, which can be used to build median, maximum and any other quantile of the message rate.</p>
<p>The user specifies the maximum message rate to keep at full resolution, any rate above that value is simply recorded in the histogram overflow bucket.</p>
<p>For example to keep track of per-millisecond message rate you would instantiate the class as follows:</p>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <a class="code" href="classjb_1_1event__rate__histogram.html#aedc6a5e584843a4685bfed4177bcb9af">event_rate_histogram</a>&lt;</div><div class="line">    int, std::chrono::microseconds&gt; my_rate_histogram;</div><div class="line"><span class="keywordtype">int</span> max_expected_rate = 1000000;</div><div class="line">my_rate_histogram rate_histo(</div><div class="line">    max_expected_rate, std::chrono::microseconds(1000));</div><div class="line"></div><div class="line">...</div><div class="line">rate_histo.sample(timestamp);</div><div class="line">...</div><div class="line">rate_histo.sample(timestamp);</div></div><!-- fragment --><p>The user of the class must provide a maximum expected message rate, higher rates are recorded in a single 'overflow' bucket. If you guess too high on the rate the rate_histo object would consume more memory than necessary. If you guess too low the high quantiles might be less accurate. Memory requirements are low (the data structure is basically a vector of ints), but can be an issue if you create many histograms (for example, one histogram per security when analyzing a market data feed).</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">duration_type</td><td>Define the units used to measure time. This class assumes all events are timestamped with a class compatible with std::chrono::duration&lt;&gt;, against some epoch that is defined by convention but not explicitly provided to the class. This is convenient because some feeds just provide microseconds or nanoseconds since midnight, while others use microseconds since the Unix Epoch. If you are using some kind of std::chrono::time_point&lt;&gt; object for your timestamps simply call time_since_epoch() on the object before sampling. </td></tr>
    <tr><td class="paramname">counter_type</td><td>The type used in the histogram counters. For most applications <em>int</em> is adequate, but you may use a smaller type if (a) you are memory constrained, and (b) you do not expect high values in the counters. You might also consider a wider integral type if you expect very high number of events. </td></tr>
    <tr><td class="paramname">rate_counter_type</td><td>The type used in the event rate counters. Similar tradeofss as <em>counter_type</em>. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="event__rate__histogram_8hpp_source.html#l00068">68</a> of file <a class="el" href="event__rate__histogram_8hpp_source.html">event_rate_histogram.hpp</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="aa2190848e4bb073a12dc71c6a3f70be9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2190848e4bb073a12dc71c6a3f70be9">&#9670;&nbsp;</a></span>binning_strategy</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename duration_type = std::chrono::microseconds, typename counter_type = int, typename rate_counter_type = int&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="classjb_1_1integer__range__binning.html">integer_range_binning</a>&lt;std::uint64_t&gt; <a class="el" href="classjb_1_1event__rate__histogram.html">jb::event_rate_histogram</a>&lt; duration_type, <a class="el" href="classjb_1_1histogram.html#a90639505faf40ecd0f1a5fb526906c2b">counter_type</a>, rate_counter_type &gt;::<a class="el" href="classjb_1_1event__rate__histogram.html#aa2190848e4bb073a12dc71c6a3f70be9">binning_strategy</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="event__rate__histogram_8hpp_source.html#l00075">75</a> of file <a class="el" href="event__rate__histogram_8hpp_source.html">event_rate_histogram.hpp</a>.</p>

</div>
</div>
<a id="abc9904205d72f7fa21a0dae8ccf13a7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc9904205d72f7fa21a0dae8ccf13a7d">&#9670;&nbsp;</a></span>rate_histogram</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename duration_type = std::chrono::microseconds, typename counter_type = int, typename rate_counter_type = int&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="classjb_1_1histogram.html">histogram</a>&lt;<a class="el" href="classjb_1_1event__rate__histogram.html#aa2190848e4bb073a12dc71c6a3f70be9">binning_strategy</a>, <a class="el" href="classjb_1_1histogram.html#a90639505faf40ecd0f1a5fb526906c2b">counter_type</a>&gt; <a class="el" href="classjb_1_1event__rate__histogram.html">jb::event_rate_histogram</a>&lt; duration_type, <a class="el" href="classjb_1_1histogram.html#a90639505faf40ecd0f1a5fb526906c2b">counter_type</a>, rate_counter_type &gt;::<a class="el" href="classjb_1_1event__rate__histogram.html#abc9904205d72f7fa21a0dae8ccf13a7d">rate_histogram</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="event__rate__histogram_8hpp_source.html#l00076">76</a> of file <a class="el" href="event__rate__histogram_8hpp_source.html">event_rate_histogram.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aedc6a5e584843a4685bfed4177bcb9af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aedc6a5e584843a4685bfed4177bcb9af">&#9670;&nbsp;</a></span>event_rate_histogram()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename duration_type = std::chrono::microseconds, typename counter_type = int, typename rate_counter_type = int&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classjb_1_1event__rate__histogram.html">jb::event_rate_histogram</a>&lt; duration_type, <a class="el" href="classjb_1_1histogram.html#a90639505faf40ecd0f1a5fb526906c2b">counter_type</a>, rate_counter_type &gt;::<a class="el" href="classjb_1_1event__rate__histogram.html">event_rate_histogram</a> </td>
          <td>(</td>
          <td class="paramtype">std::uint64_t&#160;</td>
          <td class="paramname"><em>max_expected_rate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">duration_type&#160;</td>
          <td class="paramname"><em>measurement_period</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">duration_type&#160;</td>
          <td class="paramname"><em>sampling_period</em> = <code>duration_type(1)</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">max_expected_rate</td><td>The histogram is kept at full resolution up to this rate, any periods with more events are counted only in the overflow bin. If this value is too low for the observed rates, the high quantiles may not be very accurate. </td></tr>
    <tr><td class="paramname">measurement_period</td><td>over what period we measure event rates. </td></tr>
    <tr><td class="paramname">sampling_period</td><td>how often do we measure event rates. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="event__rate__histogram_8hpp_source.html#l00089">89</a> of file <a class="el" href="event__rate__histogram_8hpp_source.html">event_rate_histogram.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a4410a139067e848dbcc91a5d71d64d17"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4410a139067e848dbcc91a5d71d64d17">&#9670;&nbsp;</a></span>last_rate()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename duration_type = std::chrono::microseconds, typename counter_type = int, typename rate_counter_type = int&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::uint64_t <a class="el" href="classjb_1_1event__rate__histogram.html">jb::event_rate_histogram</a>&lt; duration_type, <a class="el" href="classjb_1_1histogram.html#a90639505faf40ecd0f1a5fb526906c2b">counter_type</a>, rate_counter_type &gt;::last_rate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the last sample, if any. </p>

<p class="definition">Definition at line <a class="el" href="event__rate__histogram_8hpp_source.html#l00106">106</a> of file <a class="el" href="event__rate__histogram_8hpp_source.html">event_rate_histogram.hpp</a>.</p>

</div>
</div>
<a id="adc4894041b9926c540b8ede21fcfa93e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc4894041b9926c540b8ede21fcfa93e">&#9670;&nbsp;</a></span>sample()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename duration_type = std::chrono::microseconds, typename counter_type = int, typename rate_counter_type = int&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classjb_1_1event__rate__histogram.html">jb::event_rate_histogram</a>&lt; duration_type, <a class="el" href="classjb_1_1histogram.html#a90639505faf40ecd0f1a5fb526906c2b">counter_type</a>, rate_counter_type &gt;::sample </td>
          <td>(</td>
          <td class="paramtype">duration_type&#160;</td>
          <td class="paramname"><em>ts</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Record a new sample. </p>

<p class="definition">Definition at line <a class="el" href="event__rate__histogram_8hpp_source.html#l00098">98</a> of file <a class="el" href="event__rate__histogram_8hpp_source.html">event_rate_histogram.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="offline__feed__statistics_8cpp_source.html#l00224">jb::offline_feed_statistics::record_sample()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ab2fff9943ac5959eb75bb1f935c026d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2fff9943ac5959eb75bb1f935c026d9">&#9670;&nbsp;</a></span>last_rate_</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename duration_type = std::chrono::microseconds, typename counter_type = int, typename rate_counter_type = int&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::uint64_t <a class="el" href="classjb_1_1event__rate__histogram.html">jb::event_rate_histogram</a>&lt; duration_type, <a class="el" href="classjb_1_1histogram.html#a90639505faf40ecd0f1a5fb526906c2b">counter_type</a>, rate_counter_type &gt;::last_rate_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="event__rate__histogram_8hpp_source.html#l00128">128</a> of file <a class="el" href="event__rate__histogram_8hpp_source.html">event_rate_histogram.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="event__rate__histogram_8hpp_source.html#l00106">jb::event_rate_histogram&lt; std::chrono::nanoseconds, std::int64_t &gt;::last_rate()</a>, and <a class="el" href="event__rate__histogram_8hpp_source.html#l00098">jb::event_rate_histogram&lt; std::chrono::nanoseconds, std::int64_t &gt;::sample()</a>.</p>

</div>
</div>
<a id="ad2b7e41ceef0b7fb81a15942083fcfd6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2b7e41ceef0b7fb81a15942083fcfd6">&#9670;&nbsp;</a></span>rate_</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename duration_type = std::chrono::microseconds, typename counter_type = int, typename rate_counter_type = int&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classjb_1_1event__rate__estimator.html">event_rate_estimator</a>&lt;duration_type, rate_counter_type&gt; <a class="el" href="classjb_1_1event__rate__histogram.html">jb::event_rate_histogram</a>&lt; duration_type, <a class="el" href="classjb_1_1histogram.html#a90639505faf40ecd0f1a5fb526906c2b">counter_type</a>, rate_counter_type &gt;::rate_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="event__rate__histogram_8hpp_source.html#l00127">127</a> of file <a class="el" href="event__rate__histogram_8hpp_source.html">event_rate_histogram.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="event__rate__histogram_8hpp_source.html#l00098">jb::event_rate_histogram&lt; std::chrono::nanoseconds, std::int64_t &gt;::sample()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>jb/<a class="el" href="event__rate__histogram_8hpp_source.html">event_rate_histogram.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
