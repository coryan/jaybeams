<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>JayBeams: jb::itch5::compute_book Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">JayBeams
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">Another project to have fun coding.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacejb.html">jb</a></li><li class="navelem"><a class="el" href="namespacejb_1_1itch5.html">itch5</a></li><li class="navelem"><a class="el" href="classjb_1_1itch5_1_1compute__book.html">compute_book</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classjb_1_1itch5_1_1compute__book-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">jb::itch5::compute_book Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Compute the book and call a user-defined callback on each change.  
 <a href="classjb_1_1itch5_1_1compute__book.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="compute__book_8hpp_source.html">compute_book.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:structjb_1_1itch5_1_1compute__book_1_1book__update"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#structjb_1_1itch5_1_1compute__book_1_1book__update">book_update</a></td></tr>
<tr class="memdesc:structjb_1_1itch5_1_1compute__book_1_1book__update"><td class="mdescLeft">&#160;</td><td class="mdescRight">A flat struct to represent updates to an order book.  <a href="classjb_1_1itch5_1_1compute__book.html#structjb_1_1itch5_1_1compute__book_1_1book__update">More...</a><br /></td></tr>
<tr class="separator:structjb_1_1itch5_1_1compute__book_1_1book__update"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:structjb_1_1itch5_1_1compute__book_1_1order__data"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#structjb_1_1itch5_1_1compute__book_1_1order__data">order_data</a></td></tr>
<tr class="memdesc:structjb_1_1itch5_1_1compute__book_1_1order__data"><td class="mdescLeft">&#160;</td><td class="mdescRight">A convenient container for per-order data.  <a href="classjb_1_1itch5_1_1compute__book.html#structjb_1_1itch5_1_1compute__book_1_1order__data">More...</a><br /></td></tr>
<tr class="separator:structjb_1_1itch5_1_1compute__book_1_1order__data"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Type traits</div></td></tr>
<tr class="memitem:a7b2a3996c04d2ccf9d13e4302f6a4e76"><td class="memItemLeft" align="right" valign="top">typedef std::chrono::steady_clock&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#a7b2a3996c04d2ccf9d13e4302f6a4e76">clock_type</a></td></tr>
<tr class="memdesc:a7b2a3996c04d2ccf9d13e4302f6a4e76"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define the clock used to measure processing delays.  <a href="#a7b2a3996c04d2ccf9d13e4302f6a4e76">More...</a><br /></td></tr>
<tr class="separator:a7b2a3996c04d2ccf9d13e4302f6a4e76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43bdad694b5a5dc1f6953838e187eb2f"><td class="memItemLeft" align="right" valign="top">typedef clock_type::time_point&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#a43bdad694b5a5dc1f6953838e187eb2f">time_point</a></td></tr>
<tr class="memdesc:a43bdad694b5a5dc1f6953838e187eb2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">A convenience typedef for clock_type::time_point.  <a href="#a43bdad694b5a5dc1f6953838e187eb2f">More...</a><br /></td></tr>
<tr class="separator:a43bdad694b5a5dc1f6953838e187eb2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0d9de7fc523b09f8f9f9f955273e778"><td class="memItemLeft" align="right" valign="top">typedef std::function&lt; void(<a class="el" href="namespacejb_1_1itch5.html#structjb_1_1itch5_1_1message__header">message_header</a> const &amp;header, <a class="el" href="classjb_1_1itch5_1_1order__book.html">order_book</a> const &amp;updated_book, <a class="el" href="classjb_1_1itch5_1_1compute__book.html#structjb_1_1itch5_1_1compute__book_1_1book__update">book_update</a> const &amp;update)&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#ad0d9de7fc523b09f8f9f9f955273e778">callback_type</a></td></tr>
<tr class="memdesc:ad0d9de7fc523b09f8f9f9f955273e778"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define the callback type.  <a href="#ad0d9de7fc523b09f8f9f9f955273e778">More...</a><br /></td></tr>
<tr class="separator:ad0d9de7fc523b09f8f9f9f955273e778"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad2957093ea86fb1cf48bbb2aec2b8728"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#ad2957093ea86fb1cf48bbb2aec2b8728">compute_book</a> (<a class="el" href="classjb_1_1itch5_1_1compute__book.html#ad0d9de7fc523b09f8f9f9f955273e778">callback_type</a> const &amp;cb)</td></tr>
<tr class="memdesc:ad2957093ea86fb1cf48bbb2aec2b8728"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#ad2957093ea86fb1cf48bbb2aec2b8728">More...</a><br /></td></tr>
<tr class="separator:ad2957093ea86fb1cf48bbb2aec2b8728"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30c4cf4ec9881452630187ec70f639d7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#a30c4cf4ec9881452630187ec70f639d7">compute_book</a> (<a class="el" href="classjb_1_1itch5_1_1compute__book.html#ad0d9de7fc523b09f8f9f9f955273e778">callback_type</a> &amp;&amp;cb)</td></tr>
<tr class="separator:a30c4cf4ec9881452630187ec70f639d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb4de107a25884cd7f43bddb31e19aa6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#adb4de107a25884cd7f43bddb31e19aa6">handle_message</a> (<a class="el" href="classjb_1_1itch5_1_1compute__book.html#a43bdad694b5a5dc1f6953838e187eb2f">time_point</a> recvts, long msgcnt, std::size_t msgoffset, <a class="el" href="structjb_1_1itch5_1_1add__order__message.html">add_order_message</a> const &amp;msg)</td></tr>
<tr class="memdesc:adb4de107a25884cd7f43bddb31e19aa6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle a new order message.  <a href="#adb4de107a25884cd7f43bddb31e19aa6">More...</a><br /></td></tr>
<tr class="separator:adb4de107a25884cd7f43bddb31e19aa6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad31ea0085019ad85479e74e713699c48"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#ad31ea0085019ad85479e74e713699c48">handle_message</a> (<a class="el" href="classjb_1_1itch5_1_1compute__book.html#a43bdad694b5a5dc1f6953838e187eb2f">time_point</a> recvts, long msgcnt, std::size_t msgoffset, <a class="el" href="structjb_1_1itch5_1_1add__order__mpid__message.html">add_order_mpid_message</a> const &amp;msg)</td></tr>
<tr class="memdesc:ad31ea0085019ad85479e74e713699c48"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle a new order with MPID.  <a href="#ad31ea0085019ad85479e74e713699c48">More...</a><br /></td></tr>
<tr class="separator:ad31ea0085019ad85479e74e713699c48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3982cc6cdcc63d9b103b7a1bb80c5654"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#a3982cc6cdcc63d9b103b7a1bb80c5654">handle_message</a> (<a class="el" href="classjb_1_1itch5_1_1compute__book.html#a43bdad694b5a5dc1f6953838e187eb2f">time_point</a> recvts, long msgcnt, std::size_t msgoffset, <a class="el" href="structjb_1_1itch5_1_1order__executed__message.html">order_executed_message</a> const &amp;msg)</td></tr>
<tr class="memdesc:a3982cc6cdcc63d9b103b7a1bb80c5654"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle an order execution.  <a href="#a3982cc6cdcc63d9b103b7a1bb80c5654">More...</a><br /></td></tr>
<tr class="separator:a3982cc6cdcc63d9b103b7a1bb80c5654"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1a2539aa7bb3ff68a770cfc92455ea1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#aa1a2539aa7bb3ff68a770cfc92455ea1">handle_message</a> (<a class="el" href="classjb_1_1itch5_1_1compute__book.html#a43bdad694b5a5dc1f6953838e187eb2f">time_point</a> recvts, long msgcnt, std::size_t msgoffset, <a class="el" href="structjb_1_1itch5_1_1order__executed__price__message.html">order_executed_price_message</a> const &amp;msg)</td></tr>
<tr class="memdesc:aa1a2539aa7bb3ff68a770cfc92455ea1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle an order execution with a different price than the order's.  <a href="#aa1a2539aa7bb3ff68a770cfc92455ea1">More...</a><br /></td></tr>
<tr class="separator:aa1a2539aa7bb3ff68a770cfc92455ea1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad36271ad4e1a02cf23438b0e1b7585e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#aad36271ad4e1a02cf23438b0e1b7585e">handle_message</a> (<a class="el" href="classjb_1_1itch5_1_1compute__book.html#a43bdad694b5a5dc1f6953838e187eb2f">time_point</a> recvts, long msgcnt, std::size_t msgoffset, <a class="el" href="structjb_1_1itch5_1_1order__cancel__message.html">order_cancel_message</a> const &amp;msg)</td></tr>
<tr class="memdesc:aad36271ad4e1a02cf23438b0e1b7585e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle a partial cancel.  <a href="#aad36271ad4e1a02cf23438b0e1b7585e">More...</a><br /></td></tr>
<tr class="separator:aad36271ad4e1a02cf23438b0e1b7585e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa649865496e484345a891c0377d97413"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#aa649865496e484345a891c0377d97413">handle_message</a> (<a class="el" href="classjb_1_1itch5_1_1compute__book.html#a43bdad694b5a5dc1f6953838e187eb2f">time_point</a> recvts, long msgcnt, std::size_t msgoffset, <a class="el" href="structjb_1_1itch5_1_1order__delete__message.html">order_delete_message</a> const &amp;msg)</td></tr>
<tr class="memdesc:aa649865496e484345a891c0377d97413"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle a full cancel.  <a href="#aa649865496e484345a891c0377d97413">More...</a><br /></td></tr>
<tr class="separator:aa649865496e484345a891c0377d97413"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27c50c0b8c13549b235abecee6a3943d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#a27c50c0b8c13549b235abecee6a3943d">handle_message</a> (<a class="el" href="classjb_1_1itch5_1_1compute__book.html#a43bdad694b5a5dc1f6953838e187eb2f">time_point</a> recvts, long msgcnt, std::size_t msgoffset, <a class="el" href="structjb_1_1itch5_1_1order__replace__message.html">order_replace_message</a> const &amp;msg)</td></tr>
<tr class="memdesc:a27c50c0b8c13549b235abecee6a3943d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle an order replace.  <a href="#a27c50c0b8c13549b235abecee6a3943d">More...</a><br /></td></tr>
<tr class="separator:a27c50c0b8c13549b235abecee6a3943d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47407cfc6a74ab684a99317a3ec03587"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#a47407cfc6a74ab684a99317a3ec03587">handle_message</a> (<a class="el" href="classjb_1_1itch5_1_1compute__book.html#a43bdad694b5a5dc1f6953838e187eb2f">time_point</a> recvts, long msgcnt, std::size_t msgoffset, <a class="el" href="structjb_1_1itch5_1_1stock__directory__message.html">stock_directory_message</a> const &amp;msg)</td></tr>
<tr class="memdesc:a47407cfc6a74ab684a99317a3ec03587"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pre-populate the books based on the symbol directory.  <a href="#a47407cfc6a74ab684a99317a3ec03587">More...</a><br /></td></tr>
<tr class="separator:a47407cfc6a74ab684a99317a3ec03587"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a089188fb94f192807e1d194dc6a1b75b"><td class="memTemplParams" colspan="2">template&lt;typename message_type &gt; </td></tr>
<tr class="memitem:a089188fb94f192807e1d194dc6a1b75b"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#a089188fb94f192807e1d194dc6a1b75b">handle_message</a> (<a class="el" href="classjb_1_1itch5_1_1compute__book.html#a43bdad694b5a5dc1f6953838e187eb2f">time_point</a>, long, std::size_t, message_type const &amp;)</td></tr>
<tr class="memdesc:a089188fb94f192807e1d194dc6a1b75b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ignore all other message types.  <a href="#a089188fb94f192807e1d194dc6a1b75b">More...</a><br /></td></tr>
<tr class="separator:a089188fb94f192807e1d194dc6a1b75b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a894a37323f640ba91b2c5aef71e99b5f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#a894a37323f640ba91b2c5aef71e99b5f">handle_unknown</a> (<a class="el" href="classjb_1_1itch5_1_1compute__book.html#a43bdad694b5a5dc1f6953838e187eb2f">time_point</a> recvts, <a class="el" href="classjb_1_1itch5_1_1unknown__message.html">unknown_message</a> const &amp;msg)</td></tr>
<tr class="memdesc:a894a37323f640ba91b2c5aef71e99b5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Log any unknown message types.  <a href="#a894a37323f640ba91b2c5aef71e99b5f">More...</a><br /></td></tr>
<tr class="separator:a894a37323f640ba91b2c5aef71e99b5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb2fe8ab4c4b6258d8daf8a6b0afe647"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="namespacejb_1_1itch5.html#a15d06d758be46b768909e5d1aa7ddc27">stock_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#abb2fe8ab4c4b6258d8daf8a6b0afe647">symbols</a> () const </td></tr>
<tr class="memdesc:abb2fe8ab4c4b6258d8daf8a6b0afe647"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the symbols known in the order book.  <a href="#abb2fe8ab4c4b6258d8daf8a6b0afe647">More...</a><br /></td></tr>
<tr class="separator:abb2fe8ab4c4b6258d8daf8a6b0afe647"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa20c9c8e6ac97ffa326c0112156e292"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#a43bdad694b5a5dc1f6953838e187eb2f">time_point</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#afa20c9c8e6ac97ffa326c0112156e292">now</a> () const </td></tr>
<tr class="memdesc:afa20c9c8e6ac97ffa326c0112156e292"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the current timestamp for delay measurements.  <a href="#afa20c9c8e6ac97ffa326c0112156e292">More...</a><br /></td></tr>
<tr class="separator:afa20c9c8e6ac97ffa326c0112156e292"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:aee568de88b74ee8e7bd4621fa611ce2a"><td class="memItemLeft" align="right" valign="top">typedef std::unordered_map&lt; <a class="el" href="namespacejb_1_1itch5.html#a15d06d758be46b768909e5d1aa7ddc27">stock_t</a>, <a class="el" href="classjb_1_1itch5_1_1order__book.html">order_book</a>, boost::hash&lt; <a class="el" href="namespacejb_1_1itch5.html#a15d06d758be46b768909e5d1aa7ddc27">stock_t</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#aee568de88b74ee8e7bd4621fa611ce2a">books_by_security</a></td></tr>
<tr class="memdesc:aee568de88b74ee8e7bd4621fa611ce2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Represent the collection of order books.  <a href="#aee568de88b74ee8e7bd4621fa611ce2a">More...</a><br /></td></tr>
<tr class="separator:aee568de88b74ee8e7bd4621fa611ce2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abafc0179a25fe5d6180a6b051a801b53"><td class="memItemLeft" align="right" valign="top">typedef std::unordered_map&lt; std::uint64_t, <a class="el" href="classjb_1_1itch5_1_1compute__book.html#structjb_1_1itch5_1_1compute__book_1_1order__data">order_data</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#abafc0179a25fe5d6180a6b051a801b53">orders_by_id</a></td></tr>
<tr class="memdesc:abafc0179a25fe5d6180a6b051a801b53"><td class="mdescLeft">&#160;</td><td class="mdescRight">Represent the collection of all orders.  <a href="#abafc0179a25fe5d6180a6b051a801b53">More...</a><br /></td></tr>
<tr class="separator:abafc0179a25fe5d6180a6b051a801b53"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a47cd7d3d0a63bd5acb00c46b23926a29"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#a47cd7d3d0a63bd5acb00c46b23926a29">handle_order_reduction</a> (<a class="el" href="classjb_1_1itch5_1_1compute__book.html#a43bdad694b5a5dc1f6953838e187eb2f">time_point</a> recvts, long msgcnt, std::size_t msgoffset, <a class="el" href="namespacejb_1_1itch5.html#structjb_1_1itch5_1_1message__header">message_header</a> const &amp;header, std::uint64_t order_reference_number, std::uint32_t shares)</td></tr>
<tr class="memdesc:a47cd7d3d0a63bd5acb00c46b23926a29"><td class="mdescLeft">&#160;</td><td class="mdescRight">Refactor code to handle order reductions, i.e., cancels and executions.  <a href="#a47cd7d3d0a63bd5acb00c46b23926a29">More...</a><br /></td></tr>
<tr class="separator:a47cd7d3d0a63bd5acb00c46b23926a29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3122d2827a75699c0b7dd0d16fbbc1d0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#structjb_1_1itch5_1_1compute__book_1_1book__update">book_update</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#a3122d2827a75699c0b7dd0d16fbbc1d0">do_reduce</a> (orders_by_id::iterator position, <a class="el" href="classjb_1_1itch5_1_1order__book.html">order_book</a> &amp;book, <a class="el" href="classjb_1_1itch5_1_1compute__book.html#a43bdad694b5a5dc1f6953838e187eb2f">time_point</a> recvts, long msgcnt, std::size_t msgoffset, <a class="el" href="namespacejb_1_1itch5.html#structjb_1_1itch5_1_1message__header">message_header</a> const &amp;header, std::uint64_t order_reference_number, std::uint32_t shares)</td></tr>
<tr class="memdesc:a3122d2827a75699c0b7dd0d16fbbc1d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Refactor code common to <a class="el" href="classjb_1_1itch5_1_1compute__book.html#a47cd7d3d0a63bd5acb00c46b23926a29" title="Refactor code to handle order reductions, i.e., cancels and executions. ">handle_order_reduction()</a> and handle_message(order_replace_message).  <a href="#a3122d2827a75699c0b7dd0d16fbbc1d0">More...</a><br /></td></tr>
<tr class="separator:a3122d2827a75699c0b7dd0d16fbbc1d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a2b9ce68d6f826cc18f59a62ae70ee557"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#ad0d9de7fc523b09f8f9f9f955273e778">callback_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#a2b9ce68d6f826cc18f59a62ae70ee557">callback_</a></td></tr>
<tr class="memdesc:a2b9ce68d6f826cc18f59a62ae70ee557"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store the callback function, this is invoked on each event that changes a book.  <a href="#a2b9ce68d6f826cc18f59a62ae70ee557">More...</a><br /></td></tr>
<tr class="separator:a2b9ce68d6f826cc18f59a62ae70ee557"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a190bfd734092d3b164cd657b710fa30f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#aee568de88b74ee8e7bd4621fa611ce2a">books_by_security</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#a190bfd734092d3b164cd657b710fa30f">books_</a></td></tr>
<tr class="memdesc:a190bfd734092d3b164cd657b710fa30f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The order books indexed by security.  <a href="#a190bfd734092d3b164cd657b710fa30f">More...</a><br /></td></tr>
<tr class="separator:a190bfd734092d3b164cd657b710fa30f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1666264ee7d44500117aee0c65a554aa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#abafc0179a25fe5d6180a6b051a801b53">orders_by_id</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#a1666264ee7d44500117aee0c65a554aa">orders_</a></td></tr>
<tr class="memdesc:a1666264ee7d44500117aee0c65a554aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">The live orders indexed by the "order reference number".  <a href="#a1666264ee7d44500117aee0c65a554aa">More...</a><br /></td></tr>
<tr class="separator:a1666264ee7d44500117aee0c65a554aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Compute the book and call a user-defined callback on each change. </p>
<p>Keep a collection of all the order books, indexed by symbol, and forward the updates to them. Only process the relevant messages types in ITCH-5.0 that are necessary to keep the book. </p>

<p>Definition at line <a class="el" href="compute__book_8hpp_source.html#l00030">30</a> of file <a class="el" href="compute__book_8hpp_source.html">compute_book.hpp</a>.</p>
</div><hr/><h2 class="groupheader">Class Documentation</h2>
<a name="structjb_1_1itch5_1_1compute__book_1_1book__update" id="structjb_1_1itch5_1_1compute__book_1_1book__update"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct jb::itch5::compute_book::book_update</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>A flat struct to represent updates to an order book. </p>
<p>Updates to an order book come in many forms, but they can all be represented with a simple structure that shows: what book is being updated, what side of the book is being updated, what price level is being updated, and how many shares are being added or removed from the book. </p>

<p>Definition at line <a class="el" href="compute__book_8hpp_source.html#l00051">51</a> of file <a class="el" href="compute__book_8hpp_source.html">compute_book.hpp</a>.</p>
</div><table class="fieldtable">
<tr><th colspan="3">Class Members</th></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a160b3c763646d3825895fda03641e926"></a><a class="el" href="namespacejb_1_1itch5.html#a4a7797c3e775c85474e0963e8518ab3c">buy_sell_indicator_t</a></td>
<td class="fieldname">
buy_sell_indicator</td>
<td class="fielddoc">
What side of the book is being updated. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="aed197b15cbb07c65d7b5f6ea6c5f1f1e"></a>bool</td>
<td class="fieldname">
cxlreplx</td>
<td class="fielddoc">
If true, this was a cancel replace and and old order was modified too... </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="ab308187e7f8060246f21f37004d3055a"></a><a class="el" href="namespacejb_1_1itch5.html#afbe422fcea46cc63c32e32644576d188">price4_t</a></td>
<td class="fieldname">
oldpx</td>
<td class="fielddoc">
Old price for the order. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="ad5e563a82137063978806cd03d6f2215"></a>int</td>
<td class="fieldname">
oldqty</td>
<td class="fielddoc">
How many shares were removed in the old order. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a9d5f56ac2f8c9269a283d90859341338"></a><a class="el" href="namespacejb_1_1itch5.html#afbe422fcea46cc63c32e32644576d188">price4_t</a></td>
<td class="fieldname">
px</td>
<td class="fielddoc">
What price level is being updated. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a9f06457fba8d3cd857926aed7110c3a2"></a>int</td>
<td class="fieldname">
qty</td>
<td class="fielddoc">
How many shares are being added (if positive) or removed (if negative) from the book. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a0e36c8a88f23336dbbcdbc2db06e9bbd"></a><a class="el" href="classjb_1_1itch5_1_1compute__book.html#a43bdad694b5a5dc1f6953838e187eb2f">time_point</a></td>
<td class="fieldname">
recvts</td>
<td class="fielddoc">
When was the message that triggered this update received. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="aad91fa5f9ed9041e3f16b476bb55db37"></a><a class="el" href="namespacejb_1_1itch5.html#a15d06d758be46b768909e5d1aa7ddc27">stock_t</a></td>
<td class="fieldname">
stock</td>
<td class="fielddoc">
The security updated by this order. <p>This is redundant for order updates and deletes, and ITCH-5.0 omits the field, but we find it easier </p>
</td></tr>
</table>

</div>
</div>
<a name="structjb_1_1itch5_1_1compute__book_1_1order__data" id="structjb_1_1itch5_1_1compute__book_1_1order__data"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct jb::itch5::compute_book::order_data</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>A convenient container for per-order data. </p>
<p>Most market data feeds resend the security identifier and side with each order update, but ITCH-5.0 does not. One needs to lookup the symbol, side, original price, information based on the order id. This literal type is used to keep that information around. </p>

<p>Definition at line <a class="el" href="compute__book_8hpp_source.html#l00094">94</a> of file <a class="el" href="compute__book_8hpp_source.html">compute_book.hpp</a>.</p>
</div><table class="fieldtable">
<tr><th colspan="3">Class Members</th></tr>
<tr><td class="fieldtype">
<a class="anchor" id="abfe11ade2c9ffdf854a893d32e47dea8"></a><a class="el" href="namespacejb_1_1itch5.html#a4a7797c3e775c85474e0963e8518ab3c">buy_sell_indicator_t</a></td>
<td class="fieldname">
buy_sell_indicator</td>
<td class="fielddoc">
Whether the order is a BUY or SELL. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="ae5ca6ca9de19eb34f3c63e99ad99b963"></a><a class="el" href="namespacejb_1_1itch5.html#afbe422fcea46cc63c32e32644576d188">price4_t</a></td>
<td class="fieldname">
px</td>
<td class="fielddoc">
The price of the order. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="ae639c57528e23a9c53ef81400dbb3f53"></a>int</td>
<td class="fieldname">
qty</td>
<td class="fielddoc">
The remaining quantity in the order. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a82b64ce7cf73257c597712e27daabbf8"></a><a class="el" href="namespacejb_1_1itch5.html#a15d06d758be46b768909e5d1aa7ddc27">stock_t</a></td>
<td class="fieldname">
stock</td>
<td class="fielddoc">
The symbol for this particular order. </td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Member Typedef Documentation</h2>
<a class="anchor" id="aee568de88b74ee8e7bd4621fa611ce2a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::unordered_map&lt;<a class="el" href="namespacejb_1_1itch5.html#a15d06d758be46b768909e5d1aa7ddc27">stock_t</a>, <a class="el" href="classjb_1_1itch5_1_1order__book.html">order_book</a>, boost::hash&lt;<a class="el" href="namespacejb_1_1itch5.html#a15d06d758be46b768909e5d1aa7ddc27">stock_t</a>&gt; &gt; <a class="el" href="classjb_1_1itch5_1_1compute__book.html#aee568de88b74ee8e7bd4621fa611ce2a">jb::itch5::compute_book::books_by_security</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Represent the collection of order books. </p>

<p>Definition at line <a class="el" href="compute__book_8hpp_source.html#l00272">272</a> of file <a class="el" href="compute__book_8hpp_source.html">compute_book.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ad0d9de7fc523b09f8f9f9f955273e778"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::function&lt;void( <a class="el" href="namespacejb_1_1itch5.html#structjb_1_1itch5_1_1message__header">message_header</a> const&amp; header, <a class="el" href="classjb_1_1itch5_1_1order__book.html">order_book</a> const&amp; updated_book, <a class="el" href="classjb_1_1itch5_1_1compute__book.html#structjb_1_1itch5_1_1compute__book_1_1book__update">book_update</a> const&amp; update)&gt; <a class="el" href="classjb_1_1itch5_1_1compute__book.html#ad0d9de7fc523b09f8f9f9f955273e778">jb::itch5::compute_book::callback_type</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Define the callback type. </p>
<p>A callback of this type is required in the constructor of this class. After each book update the user-provided callback is invoked.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">header</td><td>the header of the raw ITCH-5.0 message </td></tr>
    <tr><td class="paramname">update</td><td>a representation of the update just applied to the book </td></tr>
    <tr><td class="paramname">updated_book</td><td>the <a class="el" href="classjb_1_1itch5_1_1order__book.html" title="Maintain the ITCH-5.0 order book for a single security. ">order_book</a> after the update was applied </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="compute__book_8hpp_source.html#l00123">123</a> of file <a class="el" href="compute__book_8hpp_source.html">compute_book.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a7b2a3996c04d2ccf9d13e4302f6a4e76"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::chrono::steady_clock <a class="el" href="classjb_1_1itch5_1_1compute__book.html#a7b2a3996c04d2ccf9d13e4302f6a4e76">jb::itch5::compute_book::clock_type</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Define the clock used to measure processing delays. </p>

<p>Definition at line <a class="el" href="compute__book_8hpp_source.html#l00037">37</a> of file <a class="el" href="compute__book_8hpp_source.html">compute_book.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="abafc0179a25fe5d6180a6b051a801b53"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::unordered_map&lt;std::uint64_t, <a class="el" href="classjb_1_1itch5_1_1compute__book.html#structjb_1_1itch5_1_1compute__book_1_1order__data">order_data</a>&gt; <a class="el" href="classjb_1_1itch5_1_1compute__book.html#abafc0179a25fe5d6180a6b051a801b53">jb::itch5::compute_book::orders_by_id</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Represent the collection of all orders. </p>

<p>Definition at line <a class="el" href="compute__book_8hpp_source.html#l00275">275</a> of file <a class="el" href="compute__book_8hpp_source.html">compute_book.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a43bdad694b5a5dc1f6953838e187eb2f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef clock_type::time_point <a class="el" href="classjb_1_1itch5_1_1compute__book.html#a43bdad694b5a5dc1f6953838e187eb2f">jb::itch5::compute_book::time_point</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A convenience typedef for clock_type::time_point. </p>

<p>Definition at line <a class="el" href="compute__book_8hpp_source.html#l00040">40</a> of file <a class="el" href="compute__book_8hpp_source.html">compute_book.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ad2957093ea86fb1cf48bbb2aec2b8728"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">jb::itch5::compute_book::compute_book </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#ad0d9de7fc523b09f8f9f9f955273e778">callback_type</a> const &amp;&#160;</td>
          <td class="paramname"><em>cb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructor. </p>

<p>Definition at line <a class="el" href="compute__book_8cpp_source.html#l00014">14</a> of file <a class="el" href="compute__book_8cpp_source.html">compute_book.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a30c4cf4ec9881452630187ec70f639d7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">jb::itch5::compute_book::compute_book </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#ad0d9de7fc523b09f8f9f9f955273e778">callback_type</a> &amp;&amp;&#160;</td>
          <td class="paramname"><em>cb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="compute__book_8cpp_source.html#l00008">8</a> of file <a class="el" href="compute__book_8cpp_source.html">compute_book.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a3122d2827a75699c0b7dd0d16fbbc1d0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#structjb_1_1itch5_1_1compute__book_1_1book__update">compute_book::book_update</a> jb::itch5::compute_book::do_reduce </td>
          <td>(</td>
          <td class="paramtype">orders_by_id::iterator&#160;</td>
          <td class="paramname"><em>position</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classjb_1_1itch5_1_1order__book.html">order_book</a> &amp;&#160;</td>
          <td class="paramname"><em>book</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#a43bdad694b5a5dc1f6953838e187eb2f">time_point</a>&#160;</td>
          <td class="paramname"><em>recvts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>msgcnt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>msgoffset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacejb_1_1itch5.html#structjb_1_1itch5_1_1message__header">message_header</a> const &amp;&#160;</td>
          <td class="paramname"><em>header</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::uint64_t&#160;</td>
          <td class="paramname"><em>order_reference_number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::uint32_t&#160;</td>
          <td class="paramname"><em>shares</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Refactor code common to <a class="el" href="classjb_1_1itch5_1_1compute__book.html#a47cd7d3d0a63bd5acb00c46b23926a29" title="Refactor code to handle order reductions, i.e., cancels and executions. ">handle_order_reduction()</a> and handle_message(order_replace_message). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">position</td><td>the location of the order matching order_reference_number </td></tr>
    <tr><td class="paramname">book</td><td>the <a class="el" href="classjb_1_1itch5_1_1order__book.html" title="Maintain the ITCH-5.0 order book for a single security. ">order_book</a> matching the symbol for the given order </td></tr>
    <tr><td class="paramname">recvts</td><td>the timestamp when the message was received </td></tr>
    <tr><td class="paramname">msgcnt</td><td>the number of messages received before this message </td></tr>
    <tr><td class="paramname">msgoffset</td><td>the number of bytes received before this message </td></tr>
    <tr><td class="paramname">header</td><td>the header of the message that triggered this event </td></tr>
    <tr><td class="paramname">order_reference_number</td><td>the id of the order being reduced </td></tr>
    <tr><td class="paramname">shares</td><td>the number of shares to reduce, if 0 reduce all shares </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="compute__book_8cpp_source.html#l00167">167</a> of file <a class="el" href="compute__book_8cpp_source.html">compute_book.cpp</a>.</p>

<p>References <a class="el" href="order__book_8hpp_source.html#l00119">jb::itch5::order_book::handle_order_reduced()</a>, <a class="el" href="log_8hpp_source.html#l00070">JB_LOG</a>, <a class="el" href="compute__book_8hpp_source.html#l00320">orders_</a>, <a class="el" href="compute__book_8hpp_source.html#l00072">jb::itch5::compute_book::book_update::qty</a>, <a class="el" href="compute__book_8hpp_source.html#l00062">jb::itch5::compute_book::book_update::stock</a>, and <a class="el" href="namespacejb.html#a8c91d72478d03f9b72486db893bf4603a7b83d3f08fa392b79e3f553b585971cd">jb::warning</a>.</p>

<p>Referenced by <a class="el" href="compute__book_8cpp_source.html#l00072">handle_message()</a>, and <a class="el" href="compute__book_8cpp_source.html#l00143">handle_order_reduction()</a>.</p>

</div>
</div>
<a class="anchor" id="adb4de107a25884cd7f43bddb31e19aa6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void jb::itch5::compute_book::handle_message </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#a43bdad694b5a5dc1f6953838e187eb2f">time_point</a>&#160;</td>
          <td class="paramname"><em>recvts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>msgcnt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>msgoffset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structjb_1_1itch5_1_1add__order__message.html">add_order_message</a> const &amp;&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handle a new order message. </p>
<p>New orders are added to the list of known orders and their qty is added to the right book at the order's price level.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">recvts</td><td>the timestamp when the message was received </td></tr>
    <tr><td class="paramname">msgcnt</td><td>the number of messages received before this message </td></tr>
    <tr><td class="paramname">msgoffset</td><td>the number of bytes received before this message </td></tr>
    <tr><td class="paramname">msg</td><td>the message describing a new order </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="compute__book_8cpp_source.html#l00018">18</a> of file <a class="el" href="compute__book_8cpp_source.html">compute_book.cpp</a>.</p>

<p>References <a class="el" href="compute__book_8hpp_source.html#l00317">books_</a>, <a class="el" href="compute__book_8hpp_source.html#l00314">callback_</a>, <a class="el" href="log_8hpp_source.html#l00070">JB_LOG</a>, <a class="el" href="compute__book_8hpp_source.html#l00320">orders_</a>, <a class="el" href="namespacejb.html#a8c91d72478d03f9b72486db893bf4603a04a75036e9d520bb983c5ed03b8d0182">jb::trace</a>, and <a class="el" href="namespacejb.html#a8c91d72478d03f9b72486db893bf4603a7b83d3f08fa392b79e3f553b585971cd">jb::warning</a>.</p>

<p>Referenced by <a class="el" href="ut__compute__book_8cpp_source.html#l00026">BOOST_AUTO_TEST_CASE()</a>, and <a class="el" href="compute__book_8hpp_source.html#l00153">handle_message()</a>.</p>

</div>
</div>
<a class="anchor" id="ad31ea0085019ad85479e74e713699c48"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void jb::itch5::compute_book::handle_message </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#a43bdad694b5a5dc1f6953838e187eb2f">time_point</a>&#160;</td>
          <td class="paramname"><em>recvts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>msgcnt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>msgoffset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structjb_1_1itch5_1_1add__order__mpid__message.html">add_order_mpid_message</a> const &amp;&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handle a new order with MPID. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">recvts</td><td>the timestamp when the message was received </td></tr>
    <tr><td class="paramname">msgcnt</td><td>the number of messages received before this message </td></tr>
    <tr><td class="paramname">msgoffset</td><td>the number of bytes received before this message </td></tr>
    <tr><td class="paramname">msg</td><td>the message describing a new order </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="compute__book_8hpp_source.html#l00153">153</a> of file <a class="el" href="compute__book_8hpp_source.html">compute_book.hpp</a>.</p>

<p>References <a class="el" href="compute__book_8cpp_source.html#l00018">handle_message()</a>, and <a class="el" href="compute__book_8hpp_source.html#l00055">jb::itch5::compute_book::book_update::recvts</a>.</p>

</div>
</div>
<a class="anchor" id="a3982cc6cdcc63d9b103b7a1bb80c5654"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void jb::itch5::compute_book::handle_message </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#a43bdad694b5a5dc1f6953838e187eb2f">time_point</a>&#160;</td>
          <td class="paramname"><em>recvts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>msgcnt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>msgoffset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structjb_1_1itch5_1_1order__executed__message.html">order_executed_message</a> const &amp;&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handle an order execution. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">recvts</td><td>the timestamp when the message was received </td></tr>
    <tr><td class="paramname">msgcnt</td><td>the number of messages received before this message </td></tr>
    <tr><td class="paramname">msgoffset</td><td>the number of bytes received before this message </td></tr>
    <tr><td class="paramname">msg</td><td>the message describing the execution </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="compute__book_8cpp_source.html#l00046">46</a> of file <a class="el" href="compute__book_8cpp_source.html">compute_book.cpp</a>.</p>

<p>References <a class="el" href="compute__book_8cpp_source.html#l00143">handle_order_reduction()</a>, <a class="el" href="log_8hpp_source.html#l00070">JB_LOG</a>, and <a class="el" href="namespacejb.html#a8c91d72478d03f9b72486db893bf4603a04a75036e9d520bb983c5ed03b8d0182">jb::trace</a>.</p>

</div>
</div>
<a class="anchor" id="aa1a2539aa7bb3ff68a770cfc92455ea1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void jb::itch5::compute_book::handle_message </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#a43bdad694b5a5dc1f6953838e187eb2f">time_point</a>&#160;</td>
          <td class="paramname"><em>recvts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>msgcnt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>msgoffset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structjb_1_1itch5_1_1order__executed__price__message.html">order_executed_price_message</a> const &amp;&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handle an order execution with a different price than the order's. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">recvts</td><td>the timestamp when the message was received </td></tr>
    <tr><td class="paramname">msgcnt</td><td>the number of messages received before this message </td></tr>
    <tr><td class="paramname">msgoffset</td><td>the number of bytes received before this message </td></tr>
    <tr><td class="paramname">msg</td><td>the message describing the execution </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="compute__book_8hpp_source.html#l00181">181</a> of file <a class="el" href="compute__book_8hpp_source.html">compute_book.hpp</a>.</p>

<p>References <a class="el" href="compute__book_8cpp_source.html#l00018">handle_message()</a>.</p>

</div>
</div>
<a class="anchor" id="aad36271ad4e1a02cf23438b0e1b7585e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void jb::itch5::compute_book::handle_message </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#a43bdad694b5a5dc1f6953838e187eb2f">time_point</a>&#160;</td>
          <td class="paramname"><em>recvts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>msgcnt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>msgoffset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structjb_1_1itch5_1_1order__cancel__message.html">order_cancel_message</a> const &amp;&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handle a partial cancel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">recvts</td><td>the timestamp when the message was received </td></tr>
    <tr><td class="paramname">msgcnt</td><td>the number of messages received before this message </td></tr>
    <tr><td class="paramname">msgoffset</td><td>the number of bytes received before this message </td></tr>
    <tr><td class="paramname">msg</td><td>the message describing the cancelation </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="compute__book_8cpp_source.html#l00055">55</a> of file <a class="el" href="compute__book_8cpp_source.html">compute_book.cpp</a>.</p>

<p>References <a class="el" href="compute__book_8cpp_source.html#l00143">handle_order_reduction()</a>, <a class="el" href="log_8hpp_source.html#l00070">JB_LOG</a>, and <a class="el" href="namespacejb.html#a8c91d72478d03f9b72486db893bf4603a04a75036e9d520bb983c5ed03b8d0182">jb::trace</a>.</p>

</div>
</div>
<a class="anchor" id="aa649865496e484345a891c0377d97413"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void jb::itch5::compute_book::handle_message </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#a43bdad694b5a5dc1f6953838e187eb2f">time_point</a>&#160;</td>
          <td class="paramname"><em>recvts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>msgcnt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>msgoffset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structjb_1_1itch5_1_1order__delete__message.html">order_delete_message</a> const &amp;&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handle a full cancel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">recvts</td><td>the timestamp when the message was received </td></tr>
    <tr><td class="paramname">msgcnt</td><td>the number of messages received before this message </td></tr>
    <tr><td class="paramname">msgoffset</td><td>the number of bytes received before this message </td></tr>
    <tr><td class="paramname">msg</td><td>the message describing the cancelation </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="compute__book_8cpp_source.html#l00064">64</a> of file <a class="el" href="compute__book_8cpp_source.html">compute_book.cpp</a>.</p>

<p>References <a class="el" href="compute__book_8cpp_source.html#l00143">handle_order_reduction()</a>, <a class="el" href="log_8hpp_source.html#l00070">JB_LOG</a>, and <a class="el" href="namespacejb.html#a8c91d72478d03f9b72486db893bf4603a04a75036e9d520bb983c5ed03b8d0182">jb::trace</a>.</p>

</div>
</div>
<a class="anchor" id="a27c50c0b8c13549b235abecee6a3943d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void jb::itch5::compute_book::handle_message </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#a43bdad694b5a5dc1f6953838e187eb2f">time_point</a>&#160;</td>
          <td class="paramname"><em>recvts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>msgcnt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>msgoffset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structjb_1_1itch5_1_1order__replace__message.html">order_replace_message</a> const &amp;&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handle an order replace. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">recvts</td><td>the timestamp when the message was received </td></tr>
    <tr><td class="paramname">msgcnt</td><td>the number of messages received before this message </td></tr>
    <tr><td class="paramname">msgoffset</td><td>the number of bytes received before this message </td></tr>
    <tr><td class="paramname">msg</td><td>the message describing the cancel/replace </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="compute__book_8cpp_source.html#l00072">72</a> of file <a class="el" href="compute__book_8cpp_source.html">compute_book.cpp</a>.</p>

<p>References <a class="el" href="compute__book_8hpp_source.html#l00317">books_</a>, <a class="el" href="compute__book_8hpp_source.html#l00314">callback_</a>, <a class="el" href="compute__book_8cpp_source.html#l00167">do_reduce()</a>, <a class="el" href="log_8hpp_source.html#l00070">JB_LOG</a>, <a class="el" href="compute__book_8hpp_source.html#l00320">orders_</a>, <a class="el" href="namespacejb.html#a8c91d72478d03f9b72486db893bf4603a04a75036e9d520bb983c5ed03b8d0182">jb::trace</a>, and <a class="el" href="namespacejb.html#a8c91d72478d03f9b72486db893bf4603a7b83d3f08fa392b79e3f553b585971cd">jb::warning</a>.</p>

</div>
</div>
<a class="anchor" id="a47407cfc6a74ab684a99317a3ec03587"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void jb::itch5::compute_book::handle_message </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#a43bdad694b5a5dc1f6953838e187eb2f">time_point</a>&#160;</td>
          <td class="paramname"><em>recvts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>msgcnt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>msgoffset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structjb_1_1itch5_1_1stock__directory__message.html">stock_directory_message</a> const &amp;&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pre-populate the books based on the symbol directory. </p>
<p>ITCH-5.0 sends the list of expected securities to be traded on a given day as a sequence of messages. We use these messages to pre-populate the map of books and avoid hash map updates during the critical path.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">recvts</td><td>the timestamp when the message was received </td></tr>
    <tr><td class="paramname">msgcnt</td><td>the number of messages received before this message </td></tr>
    <tr><td class="paramname">msgoffset</td><td>the number of bytes received before this message </td></tr>
    <tr><td class="paramname">msg</td><td>the message describing a known symbol for the feed </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="compute__book_8cpp_source.html#l00119">119</a> of file <a class="el" href="compute__book_8cpp_source.html">compute_book.cpp</a>.</p>

<p>References <a class="el" href="compute__book_8hpp_source.html#l00317">books_</a>, <a class="el" href="log_8hpp_source.html#l00070">JB_LOG</a>, and <a class="el" href="namespacejb.html#a8c91d72478d03f9b72486db893bf4603a04a75036e9d520bb983c5ed03b8d0182">jb::trace</a>.</p>

</div>
</div>
<a class="anchor" id="a089188fb94f192807e1d194dc6a1b75b"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename message_type &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void jb::itch5::compute_book::handle_message </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#a43bdad694b5a5dc1f6953838e187eb2f">time_point</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">message_type const &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Ignore all other message types. </p>
<p>We are only interested in a handful of message types, anything else is captured by this template function and ignored. </p>

<p>Definition at line <a class="el" href="compute__book_8hpp_source.html#l00250">250</a> of file <a class="el" href="compute__book_8hpp_source.html">compute_book.hpp</a>.</p>

<p>References <a class="el" href="compute__book_8cpp_source.html#l00127">handle_unknown()</a>, and <a class="el" href="compute__book_8cpp_source.html#l00135">symbols()</a>.</p>

</div>
</div>
<a class="anchor" id="a47cd7d3d0a63bd5acb00c46b23926a29"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void jb::itch5::compute_book::handle_order_reduction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#a43bdad694b5a5dc1f6953838e187eb2f">time_point</a>&#160;</td>
          <td class="paramname"><em>recvts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>msgcnt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>msgoffset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacejb_1_1itch5.html#structjb_1_1itch5_1_1message__header">message_header</a> const &amp;&#160;</td>
          <td class="paramname"><em>header</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::uint64_t&#160;</td>
          <td class="paramname"><em>order_reference_number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::uint32_t&#160;</td>
          <td class="paramname"><em>shares</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Refactor code to handle order reductions, i.e., cancels and executions. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">recvts</td><td>the timestamp when the message was received </td></tr>
    <tr><td class="paramname">msgcnt</td><td>the number of messages received before this message </td></tr>
    <tr><td class="paramname">msgoffset</td><td>the number of bytes received before this message </td></tr>
    <tr><td class="paramname">header</td><td>the header of the message that triggered this event </td></tr>
    <tr><td class="paramname">order_reference_number</td><td>the id of the order being reduced </td></tr>
    <tr><td class="paramname">shares</td><td>the number of shares to reduce, if 0 reduce all shares </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="compute__book_8cpp_source.html#l00143">143</a> of file <a class="el" href="compute__book_8cpp_source.html">compute_book.cpp</a>.</p>

<p>References <a class="el" href="compute__book_8hpp_source.html#l00317">books_</a>, <a class="el" href="compute__book_8hpp_source.html#l00314">callback_</a>, <a class="el" href="compute__book_8cpp_source.html#l00167">do_reduce()</a>, <a class="el" href="log_8hpp_source.html#l00070">JB_LOG</a>, <a class="el" href="compute__book_8hpp_source.html#l00320">orders_</a>, and <a class="el" href="namespacejb.html#a8c91d72478d03f9b72486db893bf4603a7b83d3f08fa392b79e3f553b585971cd">jb::warning</a>.</p>

<p>Referenced by <a class="el" href="compute__book_8cpp_source.html#l00046">handle_message()</a>.</p>

</div>
</div>
<a class="anchor" id="a894a37323f640ba91b2c5aef71e99b5f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void jb::itch5::compute_book::handle_unknown </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#a43bdad694b5a5dc1f6953838e187eb2f">time_point</a>&#160;</td>
          <td class="paramname"><em>recvts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classjb_1_1itch5_1_1unknown__message.html">unknown_message</a> const &amp;&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Log any unknown message types. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">recvts</td><td>the timestamp when the message was received </td></tr>
    <tr><td class="paramname">msg</td><td>the unknown message location and contents </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="compute__book_8cpp_source.html#l00127">127</a> of file <a class="el" href="compute__book_8cpp_source.html">compute_book.cpp</a>.</p>

<p>References <a class="el" href="unknown__message_8hpp_source.html#l00037">jb::itch5::unknown_message::buf()</a>, <a class="el" href="unknown__message_8hpp_source.html#l00028">jb::itch5::unknown_message::count()</a>, <a class="el" href="namespacejb.html#a8c91d72478d03f9b72486db893bf4603acb5e100e5a9a3e7f6d1fd97512215282">jb::error</a>, <a class="el" href="log_8hpp_source.html#l00070">JB_LOG</a>, and <a class="el" href="unknown__message_8hpp_source.html#l00031">jb::itch5::unknown_message::offset()</a>.</p>

<p>Referenced by <a class="el" href="ut__compute__book_8cpp_source.html#l00203">BOOST_AUTO_TEST_CASE()</a>, and <a class="el" href="compute__book_8hpp_source.html#l00250">handle_message()</a>.</p>

</div>
</div>
<a class="anchor" id="afa20c9c8e6ac97ffa326c0112156e292"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#a43bdad694b5a5dc1f6953838e187eb2f">time_point</a> jb::itch5::compute_book::now </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the current timestamp for delay measurements. </p>

<p>Definition at line <a class="el" href="compute__book_8hpp_source.html#l00265">265</a> of file <a class="el" href="compute__book_8hpp_source.html">compute_book.hpp</a>.</p>

<p>Referenced by <a class="el" href="ut__compute__book_8cpp_source.html#l00026">BOOST_AUTO_TEST_CASE()</a>.</p>

</div>
</div>
<a class="anchor" id="abb2fe8ab4c4b6258d8daf8a6b0afe647"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="namespacejb_1_1itch5.html#a15d06d758be46b768909e5d1aa7ddc27">stock_t</a> &gt; jb::itch5::compute_book::symbols </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the symbols known in the order book. </p>

<p>Definition at line <a class="el" href="compute__book_8cpp_source.html#l00135">135</a> of file <a class="el" href="compute__book_8cpp_source.html">compute_book.cpp</a>.</p>

<p>References <a class="el" href="compute__book_8hpp_source.html#l00317">books_</a>.</p>

<p>Referenced by <a class="el" href="ut__compute__book_8cpp_source.html#l00026">BOOST_AUTO_TEST_CASE()</a>, and <a class="el" href="compute__book_8hpp_source.html#l00250">handle_message()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a190bfd734092d3b164cd657b710fa30f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#aee568de88b74ee8e7bd4621fa611ce2a">books_by_security</a> jb::itch5::compute_book::books_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The order books indexed by security. </p>

<p>Definition at line <a class="el" href="compute__book_8hpp_source.html#l00317">317</a> of file <a class="el" href="compute__book_8hpp_source.html">compute_book.hpp</a>.</p>

<p>Referenced by <a class="el" href="compute__book_8cpp_source.html#l00018">handle_message()</a>, <a class="el" href="compute__book_8cpp_source.html#l00143">handle_order_reduction()</a>, and <a class="el" href="compute__book_8cpp_source.html#l00135">symbols()</a>.</p>

</div>
</div>
<a class="anchor" id="a2b9ce68d6f826cc18f59a62ae70ee557"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#ad0d9de7fc523b09f8f9f9f955273e778">callback_type</a> jb::itch5::compute_book::callback_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Store the callback function, this is invoked on each event that changes a book. </p>

<p>Definition at line <a class="el" href="compute__book_8hpp_source.html#l00314">314</a> of file <a class="el" href="compute__book_8hpp_source.html">compute_book.hpp</a>.</p>

<p>Referenced by <a class="el" href="compute__book_8cpp_source.html#l00018">handle_message()</a>, and <a class="el" href="compute__book_8cpp_source.html#l00143">handle_order_reduction()</a>.</p>

</div>
</div>
<a class="anchor" id="a1666264ee7d44500117aee0c65a554aa"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classjb_1_1itch5_1_1compute__book.html#abafc0179a25fe5d6180a6b051a801b53">orders_by_id</a> jb::itch5::compute_book::orders_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The live orders indexed by the "order reference number". </p>

<p>Definition at line <a class="el" href="compute__book_8hpp_source.html#l00320">320</a> of file <a class="el" href="compute__book_8hpp_source.html">compute_book.hpp</a>.</p>

<p>Referenced by <a class="el" href="compute__book_8cpp_source.html#l00167">do_reduce()</a>, <a class="el" href="compute__book_8cpp_source.html#l00018">handle_message()</a>, and <a class="el" href="compute__book_8cpp_source.html#l00143">handle_order_reduction()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>jb/itch5/<a class="el" href="compute__book_8hpp_source.html">compute_book.hpp</a></li>
<li>jb/itch5/<a class="el" href="compute__book_8cpp_source.html">compute_book.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
